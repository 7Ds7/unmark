/*! Unmark - http://unmark.it - v0.3.5 - 2014-02-21 - http://plainmade.com */if(void 0===unmark)var unmark={};(function(e){unmark.ajax=function(t,a,n,i,r,o){var s=unmark.urlEncode(unmark.vars.csrf_token),r=void 0!==r?r:"json",o=void 0!==o?o:!0,l="csrf_token="+s+"&content_type="+r;n=unmark.empty(n)?l:n+"&"+l,e.ajax({dataType:r,cache:!1,url:t,type:a.toUpperCase(),data:n,async:o,success:function(t){e.isFunction(i)&&i(t)},error:function(t,a,n){var r={error:n,status:a,request:t};e.isFunction(i)&&i(r)}})},unmark.swapClass=function(t,a,n){var i=t;if(-1===a.indexOf("*"))return i.removeClass(a),n?i.addClass(n):i;var r=RegExp("\\s"+a.replace(/\*/g,"[A-Za-z0-9-_]+").split(" ").join("\\s|\\s")+"\\s","g");return i.each(function(t,a){for(var n=" "+a.className+" ";r.test(n);)n=n.replace(r," ");a.className=e.trim(n)}),n?i.addClass(n):i},unmark.replaceSpecial=function(e){if(void 0!==e&&null!==e){var t=null;for(var a in unmark.special_chars)t=RegExp(a,"gi"),e=e.replace(t,unmark.special_chars[a])}return e},unmark.urlEncode=function(e){return e=unmark.replaceSpecial(e),encodeURIComponent(e)},unmark.empty=function(e){var t=void 0!==e&&null!==e?e.length:0;return e===!1||""===e||null===e||0===e||void 0===e||1>t},unmark.createCookie=function(e,t,a){if(a){var n=new Date;n.setTime(n.getTime()+1e3*60*60*24*a);var i="; expires="+n.toGMTString()}else var i="";document.cookie=e+"="+t+i+"; path=/"},unmark.readCookie=function(e){for(var t=e+"=",a=document.cookie.split(";"),n=0;a.length>n;n++){for(var i=a[n];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return null},unmark.prettyLink=function(e){return e=e.replace(/https?:\/\/(www.)?/,""),"/"===e.substr(-1)&&(e=e.substr(0,e.length-1)),e}})(window.jQuery),function(e){e(document).ready(function(){function t(e,t){var a=e?"error":"";r.message.removeClass("error").addClass(a).text(t).fadeIn()}function a(e){e?r.submitbtn.find("i").removeClass("icon-go").addClass("icon-spinner"):r.submitbtn.find("i").removeClass("icon-spinner").addClass("icon-go")}function n(){a(!1),r.submitbtn.fadeOut(),r.firstpass.val(""),r.secondpass.val("").slideUp()}function i(e){unmark.ajax("/tools/resetPassword","post",e,function(e){if(n(),e.success)t(!1,"Your password has been changed. Redirecting now..."),setTimeout(function(){window.location.href="/"},3e3);else{if(e.errors[91]!==void 0)return t(!0,"Invalid Token, Please check your email or contact support.");t(!0,"Password must contain both lower and uppercase letters and at least one number.")}})}var r={};r.helper=e(".gethere"),r.helptrigger=e(".forgot-pass"),r.firstpass=e("#password"),r.secondpass=e("#password2"),r.submitbtn=e(".login-submit"),r.resetform=e("#unmarkReset"),r.message=e(".response-message"),r.helptrigger.on("click",function(e){e.preventDefault(),r.helper.fadeToggle()}),r.firstpass.on("keypress change",function(){r.message.fadeOut(),r.secondpass.fadeIn()}),r.secondpass.on("keypress change",function(){r.submitbtn.fadeIn()}),r.resetform.on("submit",function(e){e.preventDefault();var o,s=r.firstpass.val(),l=r.secondpass.val(),u=unmark.vars.token;a(!0),s===l?(o="token="+u+"&password="+s,i(o)):(n(),t(!0,"Passwords do not match. Try again."))})})}(window.jQuery),function(e){e(document).ready(function(){function t(e,t){e===!0?o.login_wrapper.animate({top:"-400px"},500,function(){o.login_spinner.fadeIn()}):o.login_spinner.fadeOut(400,function(){o.login_wrapper.animate({top:"0"},500),t&&i(!0,t)})}function a(){o.login_spinner.fadeOut(400,function(){o.login_success.fadeIn(400,function(){setTimeout(function(){window.location.href="/marks"},800)})})}function n(e){unmark.ajax("/login","post",e,function(e){e.lookup_type!==void 0?a():t(!1,"Invalid Email or Password")})}function i(e,t){var a=o.pass_wrapper.is(":visible")?o.pass_wrapper:o.login_wrapper,n=e?"error":"";response=a.find(".response-message"),a.find("button").hide(),a.find(".field-input").val(""),response.removeClass("error").addClass(n).text(t).fadeIn()}function r(){o.pass_wrapper.is(":visible")?o.pass_wrapper.animate({top:"-400px"},500,function(){e(this).hide(),t()}):o.login_wrapper.animate({top:"-400px"},500,function(){o.pass_wrapper.show().animate({top:"0"},500)})}var o={};o.message=e(".response-message"),o.login_wrapper=e(".loginWrapper"),o.login_spinner=e(".unmark-spinner"),o.login_success=e(".unmark-success"),o.login_form=e("#unmarkLogin"),o.pass_form=e("#unmarkForgotPass"),o.login_submit=e(".login-submit"),o.forget_submit=e(".forgot-submit"),o.input_fields=e("input.field-input"),o.helper_buttom=e(".forgot-pass"),o.pass_wrapper=e(".forgotPassWrapper"),o.login_form.on("submit",function(a){a.preventDefault(),t(!0);var i=e("#email").val(),r=e("#password").val(),o="email="+i+"&password="+r;setTimeout(function(){n(o)},1500)}),o.pass_form.on("submit",function(t){t.preventDefault(),o.forget_submit.find("i").removeClass("icon-go").addClass("icon-spinner");var a=e("#forgot_email").val(),n="email="+a;unmark.ajax("/tools/forgotPassword","post",n,function(e){e.success?i(!1,"A confirmation link will be sent via email."):i(!0,"Email not recogonized"),o.forget_submit.find("i").removeClass("icon-spinner").addClass("icon-go")})}),o.input_fields.on("change",function(){o.login_submit.fadeIn(),o.message.slideUp()}),o.pass_form.find("input.field-input").on("keypress change",function(){o.forget_submit.fadeIn(),o.message.slideUp()}),o.helper_buttom.on("click",function(e){e.preventDefault(),r()})})}(window.jQuery);